!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("vv-table",[],n):"object"==typeof exports?exports["vv-table"]=n():e["vv-table"]=n()}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=3)}([function(e,n,t){var r=t(2);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,t(4).default)("6a5292eb",r,!0,{})},function(e,n,t){"use strict";var r=t(0);t.n(r).a},function(e,n){e.exports="\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable.vv-table {\n    border-spacing: 0;\n    vertical-align: baseline;\n}\n    table.vv-table thead th {\n            border-bottom: 1px #cccccc solid;\n            border-right: 1px #dddddd solid;\n}\n    table.vv-table thead th:nth-last-child(1) {\n                border-right: none;\n}\n    table.vv-table thead th p {\n                padding: 0;\n                margin: 0;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                text-transform: uppercase;\n}\n    table.vv-table thead th button {\n                border: none;\n                background: transparent;\n                width: 100%;\n}\n    table.vv-table tr {\n        background-color: #ededed;\n}\n    table.vv-table tr:nth-child(even) {\n            background-color: #dddddd;\n}\n    table.vv-table tr .cell {\n            padding: 0.125em 0.25em;\n}\n    table.vv-table tr .new-row button {\n                border: none;\n                background: transparent;\n                width: 100%;\n}\n    table.vv-table .light {\n        color: #dddddd;\n}\n"},function(e,n,t){"use strict";t.r(n);let r={},i=null;var s={dd:{inserted:(e,n,t)=>{const s=n.value,o=+new Date+"";e.setAttribute("draggable",!0),e.addEventListener("dragstart",e=>{i=o,r[o]={dragData:s,onDropCallback:null},e.dataTransfer.setData("text",o),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"},!1),e.addEventListener("dragend",e=>{if(i=null,r[o]){if("function"==typeof r[o].onDropCallback){const e=r[o].onDropCallback;setTimeout(()=>e(),0)}delete r[o]}},!1),e.addEventListener("dragover",e=>{e.preventDefault()},!1),e.addEventListener("drop",e=>{e.stopPropagation(),e.preventDefault();const n=e.dataTransfer.getData("text"),{dragData:i}=r[n];let s;e.target.childNodes&&(s=e.target.childNodes[0].data),t.data.on["dd-drop"](i,s,e)},!1)}},hilite:{update:e=>{e.focus(),e.select()}}};function o(e,n,t,r,i,s,o,a){var d,l="function"==typeof e?e.options:e;if(n&&(l.render=n,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=d):i&&(d=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,n){return d.call(n),c(e,n)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}var a=o({directives:{dd:s},props:{sortBy:{required:!1,type:Function},name:{required:!0,type:String}},computed:{canSort(){return"function"==typeof this.sortBy}},data:()=>({startPos:{x:0},canDrag:!1}),methods:{onRelease(e){this.evalAction(e),this.startPos.x=0},evalAction(e,n){Math.abs(e.clientX-this.startPos.x)<10&&this.canSort&&this.sortBy(this.name)}}},function(){var e=this.$createElement;return(this._self._c||e)("th",{directives:[{name:"dd",rawName:"v-dd",value:{name:this.name},expression:"{ name }"}],staticClass:"cell"},[this._t("default")],2)},[],!1,null,null,null).exports,d=o({},function(){var e=this.$createElement;return(this._self._c||e)("tr",{staticClass:"row"},[this._t("default")],2)},[],!1,null,null,null).exports,l={directives:{hilite:s.hilite,dd:s.dd},components:{"vv-th":a,"vv-row":d},props:{entries:{type:Array,required:!0},hide:{type:Array,required:!1},icons:{type:Object,required:!1},canEdit:{type:Boolean,required:!1}},data:()=>({activeColumns:[],entriesByRow:[],direction:{},dragging:"",selectedRows:[],inEdit:!1}),computed:{entriesByCol(){return this.activeColumns.reduce((e,n)=>(e[n]=this.entriesByRow.map(e=>e[n]),e),{})}},methods:{onDrop(e,n,t){const r=this.activeColumns.indexOf(e.name),i=this.activeColumns.indexOf(n);this.activeColumns.splice(r,1),this.activeColumns.splice(i,0,e.name)},selectAll(){this.selectedRows.length===this.entriesByRow.length?this.selectedRows=[]:this.selectedRows=this.entriesByRow.reduce((e,n,t)=>(e.push(t),e),[])},addRow(){const e=this.activeColumns.reduce((e,n)=>(e[n]=`${n}`,e),{});this.entriesByRow.push(e)},sortByDefault(e){const n=this.entriesByRow.sort((n,t)=>n[e]<t[e]?-1:n[e]>t[e]?1:0),t=Object.keys(this.direction)[0]!==e;"▲"===this.direction[e]?(n.reverse(),t&&(this.direction={}),this.direction[e]="▼"):(t&&(this.direction={}),this.direction[e]="▲")},setEntries(){this.entriesByRow=this.entries.map(e=>this.activeColumns.reduce((n,t)=>(n[t]=e[t],n),{}))},setActiveColumns(){this.activeColumns=Object.keys(this.entries[0]),this.hide&&this.hide.forEach(e=>{this.activeColumns.indexOf(e)>=0&&this.activeColumns.splice(this.activeColumns.indexOf(e),1)})}},created(){this.setActiveColumns(),this.setEntries()},watch:{entries(){console.log("updated entries")},hide:function(){this.hide&&this.hide.forEach(e=>{this.activeColumns.indexOf(e)>=0&&this.activeColumns.splice(this.activeColumns.indexOf(e),1)})}}},c=(t(1),o(l,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("table",{staticClass:"vv-table"},[t("thead",[t("vv-row",[t("th",[t("button",{on:{click:e.selectAll}},[e._v(" ")])]),e._l(e.activeColumns,function(n,r){return t("th",{directives:[{name:"dd",rawName:"v-dd",value:{name:n},expression:"{ name }"}],key:n+"-"+r,on:{click:function(t){return e.sortByDefault(n)},"dd-drop":e.onDrop}},[t("div",{staticClass:"colname",on:{"dd-drop":e.onDrop}},[t("p",[e._v(e._s(e.icons[n]+" ")),t("span",[e._v(e._s(n))]),Object.keys(e.direction).indexOf(n)>=0?t("span",[e._v(e._s(e.direction[n]))]):t("span",{staticClass:"light"},[e._v("▼")])])])])}),t("th",[t("button",{on:{click:e.selectAll}},[e._v("+")])])],2)],1),t("tbody",[e._l(e.entriesByRow,function(n,r){return t("vv-row",{key:n+"-"+r,class:"row-"+r},[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRows,expression:"selectedRows"}],attrs:{type:"checkbox"},domProps:{value:r,checked:Array.isArray(e.selectedRows)?e._i(e.selectedRows,r)>-1:e.selectedRows},on:{change:function(n){var t=e.selectedRows,i=n.target,s=!!i.checked;if(Array.isArray(t)){var o=r,a=e._i(t,o);i.checked?a<0&&(e.selectedRows=t.concat([o])):a>-1&&(e.selectedRows=t.slice(0,a).concat(t.slice(a+1)))}else e.selectedRows=s}}})]),e._l(e.activeColumns,function(i,s){return t("td",{key:i+"-"+s,staticClass:"cell",class:"row-"+r+"--cell-"+s},[t("div",{directives:[{name:"show",rawName:"v-show",value:i+"-"+n[i]!==e.inEdit,expression:"`${n}-${row[n]}` !== inEdit"}],staticClass:"cell--value"},[t("label",{on:{dblclick:function(t){e.inEdit=i+"-"+n[i]}}},[e._v(e._s(n[i]))])]),t("input",{directives:[{name:"show",rawName:"v-show",value:i+"-"+n[i]===e.inEdit&&e.canEdit,expression:"`${n}-${row[n]}` === inEdit && canEdit"},{name:"hilite",rawName:"v-hilite"}],domProps:{value:n[i]},on:{blur:function(t){e.inEdit=!1,e.$emit("update",[n,i,n[i]])},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.inEdit=!1,e.$emit("update",[n,i,n[i]])}}})])}),t("td")],2)}),t("tr",[t("td",{staticClass:"new-row",attrs:{colspan:"6"}},[t("button",{on:{click:e.addRow}},[e._v("+")])])])],2),t("p",[e._v(e._s(e.inEdit))])])},[],!1,null,null,null));n.default=c.exports},function(e,n,t){"use strict";function r(e,n){for(var t=[],r={},i=0;i<n.length;i++){var s=n[i],o=s[0],a={id:e+":"+i,css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(a):t.push(r[o]={id:o,parts:[a]})}return t}t.r(n),t.d(n,"default",function(){return f});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=i&&(document.head||document.getElementsByTagName("head")[0]),a=null,d=0,l=!1,c=function(){},u=null,p="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,n,t,i){l=t,u=i||{};var o=r(e,n);return h(o),function(n){for(var t=[],i=0;i<o.length;i++){var a=o[i];(d=s[a.id]).refs--,t.push(d)}n?h(o=r(e,n)):o=[];for(i=0;i<t.length;i++){var d;if(0===(d=t[i]).refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete s[d.id]}}}}function h(e){for(var n=0;n<e.length;n++){var t=e[n],r=s[t.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](t.parts[i]);for(;i<t.parts.length;i++)r.parts.push(b(t.parts[i]));r.parts.length>t.parts.length&&(r.parts.length=t.parts.length)}else{var o=[];for(i=0;i<t.parts.length;i++)o.push(b(t.parts[i]));s[t.id]={id:t.id,refs:1,parts:o}}}}function m(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function b(e){var n,t,r=document.querySelector("style["+p+'~="'+e.id+'"]');if(r){if(l)return c;r.parentNode.removeChild(r)}if(v){var i=d++;r=a||(a=m()),n=w.bind(null,r,i,!1),t=w.bind(null,r,i,!0)}else r=m(),n=function(e,n){var t=n.css,r=n.media,i=n.sourceMap;r&&e.setAttribute("media",r);u.ssrId&&e.setAttribute(p,n.id);i&&(t+="\n/*# sourceURL="+i.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,r),t=function(){r.parentNode.removeChild(r)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else t()}}var y,g=(y=[],function(e,n){return y[e]=n,y.filter(Boolean).join("\n")});function w(e,n,t,r){var i=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(n,i);else{var s=document.createTextNode(i),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(s,o[n]):e.appendChild(s)}}}])});